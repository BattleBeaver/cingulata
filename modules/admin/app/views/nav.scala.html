<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width-device-width, initial-scale = 1.0"/>
    <title>Admin Cingulata</title>
    <link rel="stylesheet" href="admin/assets/stylesheets/style.css" media="screen" title="no title" charset="utf-8">
    <script src="admin/assets/javascripts/cng.main.js"></script>
    <script src="@controllers.admin.routes.Assets.at("javascripts/editablejs/editable.js")" charset="utf-8"></script>
    <script src="@controllers.admin.routes.Assets.at("javascripts/cng.main.js")" charset="utf-8"></script>
    <link rel="stylesheet" media="screen" href="@controllers.admin.routes.Assets.at("stylesheets/editablejs/editable.css")">

    <script>
      window.onload = function() {
        document.getElementById("page-sidebar").addEventListener("click", function() {
          if (event.target.tagName == "SPAN") {

            if (event.target.id == "categories") {
              cng.ajax.get("admin/categories", function(xhr) {
                document.getElementById("page-content").innerHTML = xhr.response;
                cng.editable.init();
              });

            } else if (event.target.id == "crawlers") {
              cng.ajax.get("admin/crawlers", function(xhr) {
                document.getElementById("page-content").innerHTML = xhr.response;
                cng.editable.init();
                manageCrawlers();

              });

            } else if (event.target.id == "crawler-details") {
                cng.ajax.get("admin/crawler-details", function(xhr) {
                  document.getElementById("page-content").innerHTML = xhr.response;
                  cng.editable.init();
                });
            }

          }
        })

          function manageCrawlers() {
            var table = document.querySelector("table");
            var tbody = document.querySelector("tbody");
            var thead = document.querySelector("thead");
            var headerRow = thead.firstElementChild;
            var th = headerRow.querySelectorAll("th");
            headerRow.addEventListener("mouseover", function() {
              for (var i = 0; i < th.length; i++) {
                thead.style.color = "#f87500";
              }
            });
            headerRow.addEventListener("mouseout", function() {
                for (var i = 0; i < th.length; i++) {
                  thead.style.color = "black";
                  thead.style.fontWeight = "normal";
            }
            });

            tbody.addEventListener("mouseover", function() {
              console.log(event.target);
              if (event.target.tagName == "TD") {
                console.log(event.target.parentNode);
                var currentElement = event.target.parentNode.querySelectorAll("td");
                event.target.parentNode.style.boxShadow = "0 2px 18px rgba(0,0,0,0.25), 0 1px 5px rgba(0,0,0,0.22)";
                event.target.parentNode.style.cursor = "pointer";
              }
            });

            tbody.addEventListener("mouseout", function() {
              console.log(event.target);
              if (event.target.tagName == "TD") {
                console.log(event.target.parentNode);
                var currentElement = event.target.parentNode.querySelectorAll("td");
                event.target.parentNode.style.boxShadow = "0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)";
              }
            })

          }
        }

        function verifyCrawler() {
          var obj = {
            form: document.forms[0],
            url: "http://localhost:9001/crawlers/verify",
            type: "json"
          };

          cng.ajax.submit(obj);
        }

        function deleteCrawler(id) {
          cng.ajax.delete("admin/crawlers/" + id + "/delete");
        }
    </script>
  </head>
  <body>
    <div id="page-wrapper">
      <div id="page-sidebar">
        <div class="container">
          <section id="logo">
            CINGULATA
          </section>
          <div id="sidebar-nemu">
            <ul>
              <li>
                <a href="#">
                  <i class="glyph-icon icon-linecons-shop"></i>
                </a>
              </li>
              <li>
                <a href="#">
                  <i></i>
                  <span id="categories">Categories</span>
                  <span class="glyphicons glyphicons-star-empty"></span>
                </a>
              </li>
              <li>
                <a href="#">
                  <i></i>
                  <span id="crawlers">Manage Crawler</span>
                </a>
              </li>
              <li>
                <a href="#">
                  <i></i>
                  <span id="crawler-details">Crawler Details</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    <!-------- CONTENT PAGE ----------->
      <div id ="page-content-wrapper">
        <nav id="page-nav">
        <div id="page-content">
          Admin
        </div>
      </div>
  </div>
  </body>
</html>
